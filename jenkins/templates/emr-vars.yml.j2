---
name: '{{ emr_cluster_name }}'
region: '{{ emr_region }}'
release_label: '{{ emr_release_label }}'
ami_version: '{{ emr_ami_version }}'
task_instance_num: 1
task_instance_type: m1.medium
task_instance_bid: 0.03
core_instance_num: 1
core_instance_type: m1.medium
master_instance_num: 1
master_instance_type: m1.medium
role: EMR_EC2_DefaultRole
keypair_name: '{{ emr_keypair_name }}'
vpc_subnet_id: '{{ emr_vpc_subnet_id }}'
log_uri: 's3://{{ emr_s3_logs_bucket }}'

{% if emr_release_label %}
applications:
  - name: hadoop
  - name: ganglia
  - name: hive
  - name: pig
  - name: sqoop-sandbox
{% endif %}

bootstrap_actions:
  - name: security
    path: 's3://{{ emr_s3_config_bucket }}/security.sh'

steps:
{% if not emr_release_label %}
  - type: hive_install
{% endif %}
  - type: script
    name: "Install Sqoop"
    step_args: [ "s3://{{ emr_s3_config_bucket }}/install-sqoop", "s3://{{ emr_s3_config_bucket }}" ]
    action_on_failure: TERMINATE_JOB_FLOW  # Set to CANCEL_AND_WAIT when debugging step failures.
